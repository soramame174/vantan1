{% extends 'base.html' %}

{% block title %}音楽を追加する{% endblock %}

<style>

/* Bootstrapのスタイルが影響しないように調整 */
input[type="submit"], button {
    background-color: #ff2583 !important;
    color: #f4f4f4 !important;
    border: none !important;
    padding: 10px 30px !important;
    border-radius: 5px !important;
    cursor: pointer !important;
}

input[type="submit"]:hover, button:hover {
    background-color: #ff4081 !important;
}


/* ピンク系の色 */
body {
    background-color: #ffffff; /* 淡いピンク */
    color: #565656; /* 文字色を暗めに */
}

.navbar {
    background-color: #ffcaf1 !important; /* 少し落ち着いたピンク */
}

.navbar-dark .navbar-nav .nav-link {
    color: rgb(112, 112, 112) !important;
}

.navbar-dark .navbar-nav .nav-link:hover {
    color: #ff4081 !important; /* ホバー時に明るいピンクに */
}

button, input[type="submit"] {
    background-color: #ff2583; /* 明るいピンク */
    color: #f4f4f4;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    margin-top: 20px; /* ボタンに余白を追加 */
    cursor: pointer;
}

button:hover, input[type="submit"]:hover {
    background-color: #ff4081; /* ホバー時の色変更 */
}

h1, h2, h3, h4 {
    color: #ff4081; /* 見出しをピンク */
}

textarea[name="text"], input[name="category"], input[name="title"] {
    border: 2px solid #f06292; /* ピンク系の枠線 */
    padding: 10px;
    border-radius: 5px;
    width: 100%; /* フル幅に設定 */
    margin-bottom: 20px; /* フィールド間に余白を追加 */
}

textarea[name="text"] {
    height: 150px; /* 高さを設定 */
}

form {
    max-width: 600px; /* フォーム全体の幅を制限 */
    margin: 0 auto; /* フォームを中央寄せ */
    padding: 20px;
    border: 1px solid #ffdae7; /* フォーム枠線 */
    border-radius: 10px;
    background-color: #fff6fa; /* フォーム背景を淡いピンクに */
}


/* 全画面モーダルのスタイル */
.modal {
    display: flex; /* 中央揃え用 */
    justify-content: center;
    align-items: center;
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8); /* 背景を暗くする */
}

.modal-content {
    background-color: #f8f9fa;
    border-radius: 10px;
    padding: 30px;
    width: 90%;
    max-width: 600px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.modal-content h3 {
    margin-bottom: 20px;
    color: #333;
}

.modal-content h4 {
    margin: 10px 0;
    color: #555;
    line-height: 1.5;
}

.modal-content label {
    display: block;
    margin: 20px 0;
    font-size: 1em;
}

.modal-content button {
    background-color: #ff2583;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.1em;
}

.modal-content button:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}


</style>

{% block content %}
    {% block plus_button %}
    {% endblock %}
    <div id="confirmationModal" class="modal" style="background-color: #3333333b;">
        <div class="modal-content" style="background-color: #3333333b;">
            <div class="c-3 m-4 bg-light rounded" type="kasane" style="background-color: #3333338a;">
                <div class="border border_color p-4 mb-4">
                    <h2><br></h2>
                    <h3>このページの内容をご確認ください</h3>
                    <p>
                        平素より当アプリをご利用いただき、誠にありがとうございます。<br>
                        当音楽アプリでは、ユーザー様がアップロードする楽曲につきまして、以下の事項を遵守いただきますようお願い申し上げます。
                    </p>
                    <h2><br></h2>
                    <h4>利用規約と法律の遵守について</h4>
                    <p>
                        ・著作権法に基づき、他人が作成した楽曲や歌、音楽の無断使用・アップロードは禁止されています。<br><br>
                        ・他者が権利を有するコンテンツを無断でアップロードした場合、法的責任が生じる可能性がございますので、十分にご注意ください。<br><br>
                        ・ご自身で作成された楽曲や、フリーライセンスで提供されている音楽のみをアップロードしてください。
                    </p>
                    <h2><br></h2>
                    <h4>お願い</h4>
                    <p>
                        アップロードを行う際には、必ず内容を十分にご確認いただき、責任を持ってご利用いただきますようお願い申し上げます。
                    </p>
                    <h6><br></h6>
                    <p class="responsive-line" style="color: #ff4081;">ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー</p>
                    <style>
                        .responsive-line {
                            width: 100%; /* 幅を100%に設定して親要素に合わせる */
                            white-space: nowrap; /* テキストが折り返されないようにする */
                            overflow: hidden; /* 親要素からはみ出さないようにする */
                        }
                    </style>
                    <h5><br></h5>
                    <label>
                        <input type="checkbox" id="confirmCheckbox">
                        私は上記の内容および利用規約を理解し、遵守することを承諾しました。
                    </label>
                    <h2><br></h2>
                    <button id="confirmButton" class="tobi" disabled>確認して進む</button>
                    <p style="font-size: 0.9em; color: gray;">
                        ※ チェックボックスを選択するまでボタンは有効になりません。
                    </p>
                    <p class="responsive-line" style="color: #ff4081;">ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー</p>
                    <p style="font-size: 0.9em; color: gray;">
                        もしこの画面が作成ボタンを押した際に表示された場合、URLが記入されてないためです。記入して再度お試しください。
                    </p>
                </div>
            </div>
        </div>
    </div>

    <form method="post" enctype="multipart/form-data">  <!-- enctype を追加 -->
        {% csrf_token %}
        
        <div class="p-2">
            <label for="title">タイトル</label>
            {{ form.title }}
        </div>

        <div class="p-2 form-group">
            <label for="id_audio_file">音楽ファイル</label>
            <input type="file" name="audio_file" id="id_audio_file"> <!-- 手動でファイルフィールドをレンダリング -->
        </div>
        
        

        <div class="p-2">
            <label for="thumbnail">サムネイル</label>
            {{ form.thumbnail }}
        </div>
        <h6><br></h6>

        <!-- 歌詞入力 -->
        <div class="p-2">
            <label for="id_text">歌詞</label>
            <div>    
                <textarea id="id_text" name="text" rows="15" cols="45%">{{ form.text.value }}</textarea>
            </div>
        </div>    
        
        <h6><br></h6>

        <div class="p-2">
            <label for="category">ジャンル</label>
            {{ form.category }}
        </div>
        <div class="p-2">
            <label for="category">キーワード</label>
            {{ form.custom_category }}
            <span><p style="color: gray;">検索時に見つかりやすくなります。<br>(一言書いても大丈夫なので自由に書いてください)</p></span>
        </div>
        <div class="form-group p-2">
            <label for="ongaku_url">この曲のURL</label>
            <input type="url" name="ongaku_url" id="ongaku_url" class="form-control form-control-lg font-weight-bold text-dark" value="{{ form.ongaku_url.value|default:'' }}">
            <small><p style="color: gray;">この曲のウェブサイトや音楽リンクを必ず入力してください。</p></small>
        </div>
        
        <div class="p-2">
            <label for="is_public">公開設定</label>
            {{ form.is_public }}
            <div>
                <small>公開にする場合はチェックしてください。</small>
            </div>
        </div>        
        
            
        <div class="p-2">
            <button type="submit" class="tobi">追加する</button>
        </div>
    </form>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const modal = document.getElementById('confirmationModal');
            const form = document.getElementById('music-form');
            const checkbox = document.getElementById('confirmCheckbox');
            const confirmButton = document.getElementById('confirmButton');

            // モーダルを表示
            modal.style.display = 'block';

            // チェックボックスの状態を監視
            checkbox.addEventListener('change', function () {
                confirmButton.disabled = !checkbox.checked;
            });

            // 確認ボタンが押されたら
            confirmButton.addEventListener('click', function () {
                modal.style.display = 'none'; // モーダルを非表示
                form.style.display = 'block'; // フォームを表示
            });
        });
    </script>
    {% block is_authenticated %}
    {% endblock %}
{% endblock %}